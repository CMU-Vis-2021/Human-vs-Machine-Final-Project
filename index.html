<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="./assets/apple-touch-icon.d4728cc5.png">
    <link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAABNtJREFUWEftll1MVEcUx/8zd+/u8rHLdxdWBFE+lxRFsDEmbakWfWm1tkpImlpF2hAs8UGsMU0fmoZa0w81EW1ttWLSVk0bJe2ThGTrQ9OAoK42uwiVjxpY+XIBt7ss995p5uquC6y4GhNfOMl9uTNzzm/O/8yZIXjGRp5xfMwDzGfgsTKQU1CQAaIpIQopBCWLCFgsL2IG5gIj3WDsMgTF6rhypSfc4n4kgMViiVZE/VYCUkEJWZaVlUVyc3NgNpthiI5W40xMTKB/YAB2uwOdXV2McRCFnRCJdNJms7nngnkoQFFRkeiWlBoCujffYkl8Y8N6lLz8EuLi4uAeG8EtezvGh/pV38YkM1LzliMqJgGjo6Ow/nER5xobOdAwGKszxRsPW61WKRRISIDs/MKlgoaetFjyltXsqMaK4mJ1rds1gj9/+QZdl6xgijzNH6ECMotLsGpTFaJiE8AYQ0vrJRyur4fd0dGuyGxbx/V220yIWQB5Swvf0esijn2wo1pftnkTKKXqmqG+G/j90F54Ju7MKW+EIQ6v7dyHpLRsdZ6iKDh95izqjxz1eL2+Sse1tp+CHUwDyCtYvtuUnLz/wJdfkOzsrMA8vvOzn76vBjcttiBxYSb+ab+I28P3YIxaAhLkiUOUfXxMzYTfHB0d2FX7IXMODtY6rrZ97f8fWJZXULg9NXXhd98ePUJMpuem7bLp+zp0tjQjeUk+Nu4+BEIpent7sLn8bXWHUSLBCrOIxbFCYF3WC2tQWvnRND9OpxPvVVWz/v6BbQ5bWwMfVAG45sYYQ8upkye06Wlp0xbxgju1p1zV/PnVG/FieY06zjVeXbpOPQF+K0nXBiB4TWzZf1otzGDr7u7Blortkx73WLHdZruuAuQuLWreU7trNdd8pnX81YTmE/vU3xEx8SjdeRALFizAufON+Ozz/dOm80yU5ekDcqyp2IuclaWzfP58+gy+OnCwyX61bS3JLChIjdRG9lmbm4hOp5s1ufW3BvCP29gkw/nOKRgMBrhcrpDF+FauHjG6e8queP1d9ZtpHo8Hr7y6lskexUx6nM4MAvFmQqwh5NU4E+BXhzdkYP/PcAC4fCNjd5lCZTNhjJG+2yM3jFGRmVpRM6cEjAFn7V64p1hIiHAl8Ez68J938kKaKWGdmqu+geGtVBB+iDVEggSfJ958goqQz73pkmHt9YUECKcIJVnB2F23lykoTk9J+FsFuJ+F81pRXG+Mipjl3H8M/QMcorV/KpCJcI+hrCgYv+thU7K8LSMl8cEx5I4djiGDPpZe0ImalYZIXskPOktwI/JDcDnGffekCKcRSbKMCbdXkSRp9yJz0uxGxB05nSxqEnd+FASygUNohAeN5UlbMferau6Z9CiKUrnInPTwVnxfDnpr8E6twtgneq2oj9RrA/fB41xG3JdvSuLFBkmS2yVCty5Jjr82U9+HXsf/Do5lyrK0j1LyplYjUJ1WhKgRVGnmuo4VhamBvT4fZJkNMbC6NFN8PSEk/Os4mLK7fziXUlQBpAxAikYjQEOpmhV/mfBzzQNznSVZYfxlRCg9rmVxDcnJ5MkeJDNTxRijfQPD/Cm2CiD5jGEhAYyg/EXGXADpJoxdliFYM1Lint6TbM629xQGH/kmfAox5nQxDzCfgf8BvT8tq4+82dcAAAAASUVORK5CYII=">
    <link rel="icon" type="image/png" sizes="16x16" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAhtJREFUOE9jZKAQMFKon4H6BmhpGcv9Z2OMVVdVc5SUklRg+P+f4fnzFw9u3r61n/kP46IrV04/RnY13AVaWlo8QuLSrcFBgZnenu6sb2+eZnh09RRYrZy2GYOQminDlu07fq9dt27al3evqy9duvQVJAc2QEfHVNbC1nx7VWWFtoiQIMPm/lKGb58/MLx7+Yzh398/DCxMDAxSqnoMvoXdDG/evmNobe+8cvDYac87l04+YQTZbOfidqq9pUWTjY2N4dLedQxXD21miGyYxzBtxkyGhQsXMphKsTJoibAw2ITnMOg5BzH8+vWLobyq+tqJQ/vNGLWNzMo2r1/bKS4uDnbulkkVDA+unWNgNgxh2L1nL8OjR48YmBkZGKJ1OBmU9MwYfPI6wOqev3jBEBAQXMr48PnbeiEBngYmRkhwgAy4d+kUw9Ir3xn+/ocEFzYD/v77x/Du4+dSxvuvXklwsXJc5uHkEAEpBnnhyMopDNfe/GE4/ew32AB0L/z//5/h09cf117/+W4Gtvb+k7cWnNysm3k42EVAgQYKxGe3LzH8+QdxAXIgMjIxM3z59uPKX8a/njLCwk/g0fj06TtQ/E/mZGPzZWb8z3j98BaUaNS09WH4/e//7x8/fk1jZfhdLSEhgYhG5IRx7+VLPZb/rBHMzIzWTExMMoyMDP///v334Pfvv/tZ2RkXSQsLY09I5OYJ6ucFUl0CAGhZ131WDjK+AAAAAElFTkSuQmCC">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Insightful Saliency Maps</title>
    
    <script src="https://d3js.org/d3.v6.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://unpkg.com/ml5@0.4.3/dist/ml5.min.js"></script>
    <script type="text/javascript" src="imgstruct.json"></script>
    <script type="module" crossorigin src="./assets/index.75de11d8.js"></script>
    <link rel="modulepreload" href="./assets/vendor.79436710.js">
    <link rel="stylesheet" href="./assets/index.499f67fb.css">
  </head>
  <body>
    <div class="container" id="top">
      <h1>
         In<span style="font-style:  italic;">sight</span>ful Saliency Maps
      </h1>
      <nav>
          <button id = "openTab1" onclick = "changeTab(this,'tab1')" class = "active">Stylize an Image</button>
          <button id = "openTab2" onclick = "changeTab(this,'tab2')">Saliency Similarity</button>
          <button id = "openTab3" onclick = "changeTab(this,'tab3')">Explain an Image</button>
      </nav>
      <div id = "tab1">
             <h2>Make your own stylized image. See what the AI predicts. Is it biased towards texture or shape?</h2>
             <div class = "flex">
                 <div class = "flex-inner step">
                     <label for="shape"><span class = "number">1</span>Choose a shape:</label>
                     <br>
                     <div class = "select">
                         <select class = "standard-select" name="shape" id="shapeselect0" onchange="shapeImg()">
                             <option value="-1" selected disabled hidden>Select choice</option>
                             <!-- <option value="cat">Cat</option> -->
                             <option value="dog">Dog</option>
                             <option value="elephant">Elephant</option>
                             <option value="bear">Bear</option>
                         </select>
                     </div>
                     <img id="shapeimg0">
                 </div>
     
                 <div class = "flex-inner step">
                     <label for="texture"><span class = "number">2</span>Choose a texture:</label>
                     <br>
                     <div class = "select">
                         <select class = "standard-select" name="texture" id="textureselect0" onchange="textureImg()">
                             <option value="-1" selected disabled hidden>Select choice</option>
                             <option value="bikes">Bicycle</option>
                             <option value="tiger">Tiger</option>
                             <option value="trucks">Trucks</option>
                             <option value="zebra">Zebra</option>
                         </select>
                     </div>
                     <img id="textureimg0">
                 </div>
     
                 <div class = "flex-inner step">
                     <label for="shape"><span class = "number">3</span>Stylize the Image:</label>
                     <br>
                     <button class = "blue" onclick="stylizeImg()">Stylize</button>
                 </div>
                 <div class = "flex-inner step">
                     <label for="shape">Stylized Image</label>
                     <div class = "output-labels">
                         <p>AI Prediction: <span id = "prediction" class = "output"></span></p>
                         <!-- <p>Biased: <span id = "biased" class = "output">Texture</span></p> -->
                     </div>
                     <img id="stylizedimg0">
                 </div>
             </div>
             <div class = "more-images">
                 <p>Want to stylize another image?</p>
                 <img alt = "plus icon" src = "./assets/plus.dc1c978c.svg" id = "plusicon" onmouseenter="hoverImg()" onmouseleave="leaveImg()" onclick="styleAnother()">
             </div>
<!--              <a href="#details">Learn about Style Transfers and Saliency Maps</a>
 -->             <button id = "detailsButton" class = "blue" onmouseenter="hoverBtn()" onmouseleave="leaveBtn()" onclick="location.href='#details'; includeHTML();">Learn about Style Transfers and Saliency Maps</button>
             <div id="details">
                <button id = "topButton" class = "blue" onmouseenter="hoverBtn()" onmouseleave="leaveBtn()" onclick="location.href='#top';">Go to top</button>
                 <h1>About  In<span style="font-style:  italic;">sight</span>ful Saliency Maps</h1>
                 <div w3-include-html="./content.html"></div>
             </div>
         </div>
         <div id = "tab2" class = "hidden">
                <h2>Explore the saliency maps of stylized images. See how they compare to the saliency map of the original, un-stylized image. Important note: Only works for Dog x Tiger right now.</h2> 
            <div class="flex">
              <div class = "flex-inner step" id = "stylized-saliency"> 
                  
                  <p style="text-align: center;"> <b> Choose a stylized image:</b></p>
                  
                  <div class="stylized-select" style="padding: 10px; text-align: center;">
                       <select class = "standard-select" name="stylized" id="stylized-ss" onchange="ssimg()" style="width:30%;">
                           <option value="-1" selected disabled hidden>Select choice</option>
                           <option value="dog-stylized-tiger">Dog x Tiger</option>
                           <option value="dog-stylized-zebra">Dog x Zebra</option>
                           <option value="dog-stylized-trucks">Dog x Trucks</option>
                       </select>
                  </div>
                  <div class="flex" id="stylized-img-div">
                    <img id="stylized-img-ss">
                  </div>
                  <div id="sliders" style="display: none;">
                    <input type="range" id="sliderOpacity" min="0" max="100" value="40" class="sliders" oninput="changeOpacity()" /> <span id="numOpacity">40</span>%
                  </div>
                  <div style="text-align: center;">
                    <input type="radio" name="xraiList" value="show" id="xrai" onchange="xrairadio()" checked>Show XRAI
                    <input type="radio" name="xraiList" value="hide" id="xrai" onchange="xrairadio()">Hide XRAI
                    <input type="radio" name="xraiList" value="overlap" id="overlap" onchange="xraioverlap()">Overlap XRAI
                  </div>

                
              </div>
              <div class = "flex-inner step" id = "original-saliency">
                <p> <b> Original image: </b> </p>

                <div class="original-select" style="padding: 10px;">
                       <select class = "standard-select" name="original" id="original-ss" onchange="ogimg()" style="width:30%;">
                           <option value="-1" selected disabled hidden>Select stylized image</option>
                           <option value="dog" disabled>Dog</option>
                           <option value="elephant" disabled>Elephant</option>
                           <option value="bear" disabled>Bear</option>
                       </select>
                  </div>
                  <div class="flex" id="original-img-div">
                    <img id="original-img-ss">
                    
                  </div>
                  <input type="radio" name="ogList" value="show" id="og" onchange='xrairadio(document.getElementsByName("ogList"), query = ".flex #original-img-div", appendHTML = "<img id=\"original-img-xrai\">", originalHTML = "<img id=\"original-img-ss\">")' checked>Show XRAI
                  <input type="radio" name="ogList" value="hide" id="og" onchange='xrairadio(document.getElementsByName("ogList"), query = ".flex #original-img-div", appendHTML = "<img id=\"original-img-xrai\">", originalHTML = "<img id=\"original-img-ss\">")'>Hide XRAI
              </div>
            </div>
            <div class="visualize-similarity">
                <div id="salsim-div" style="display: none;">
                  <p> <b> Visualize the similarity between the two saliency maps. </b> </p>
                  <div class="flex">
                    <div class="flex-inner step" style="padding: 20px;">
                      <div style="text-align: center;">
                        Intersection:
                        <!-- <input type="radio" name="salsimList" value="intersection" id="salsim" onchange="saliencySim()" checked>Intersection -->
                        <!-- <input type="radio" name="salsimList" value="difference" id="salsim" onchange="saliencySim()">Difference -->
                      </div>
                      <div id="sliders">
                        <input type="range" id="sliderAlpha" min="0" max="20" step="5" value="15" class="sliders" oninput="changeAlpha()" /> <span id="numAlpha">15</span> delta
                      </div>
                      <img id="salsim-img" style="border: 0px; width: auto;"/>
                    </div>
                    <div class="flex-inner step" style="padding: 20px;">
                      Comparison of Top-K Colors:
                      <div id="sliders">
                        <input type="range" id="sliderK" min="2" max="7" step="1" value="6" class="sliders" oninput="changeK()" /> <span id="numK">6</span> colors
                      </div>
                      <div class="flex">
                        <div class="flex-inner step">
                            <div id="salsim-pie1" style="padding: 5px;"> </div>
                        </div>

                        <div class="flex-inner step">
                            <div id="salsim-pie2" style="padding: 5px;"> </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
            </div>
            <div class="visualize-similarity" >
              <p> <b> Compute the average saliency </b> </p>
              <div id="my-dataviz"></div>
            </div>
         </div>
         <div id = "tab3" class = "hidden">
            <div class = "flex">
              <div  class = "flex-inner step"><h2>Draw what the AI sees.<br>See how your perception compares to the AI.</h2></div>
              <div class = "flex-inner gifTopper">
                <img id = "canvasImg">
              </div>
           </div>
            <p>The AI makes predictions based on regions it feels are important to identifying the image. Can you guess what places in this image the AI feels are the <b><span class = "box yellow"></span>most important</b> to identifying it?<br>What is <b><span class = "box orange"></span>important</b> and <b><span class = "box red"></span>somewhat important</b>? Finally, what is <b><span class = "box purple"></span>least important</b>?</p>
            <div class = "step">
                <h3> Draw on the image how you think a computer would classify it</h3>
                <div class = "flex">
                    <div>
                        <canvas id="canvas" width="330" height="330" >
                        Your browser does not support the HTML5 canvas tag.
                        </canvas>
                        <div class = "drawControls">
                            <h4>Select a color</h4>
                            <button class ="color-btn yellow active" onclick = "changeColorCanvas('yellow')">Yellow</button>
                            <button class ="color-btn orange" onclick = "changeColorCanvas('orange')">Orange</button>
                            <button class ="color-btn red" onclick = "changeColorCanvas('red')">Red</button>
                            <button class ="color-btn purple" onclick = "changeColorCanvas('purple')">Purple</button>
                        </div>
                    </div>
                    <div id = "d3-canvas-bar">
                        <h4>Percentage of pixels correct so far</h4>
                        <p><span class = "ai"></span>= Here's a hint! This is how the computer sees</p>
                    </div>
                  </div>
                  <div id = "answerCanvas">
                      <h3>Here what the computer sees</h3>
                      <canvas id="canvas-compare" width="330" height="330" >
                        Your browser does not support the HTML5 canvas tag.
                      </canvas>
                  </div>
                <img id = "canvasImg-compare" src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUoAAAFKCAMAAABM9+Y3AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAzVpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDcuMC1jMDAwIDc5LmRhYmFjYmIsIDIwMjEvMDQvMTQtMDA6Mzk6NDQgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9Im1hdHBsb3RsaWIgdmVyc2lvbjMuMi4yLCBodHRwOi8vbWF0cGxvdGxpYi5vcmcvIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjFEMTA3RkY4NDFCNzExRUM5RTIyQTFCQThFQTI1NjlCIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjFEMTA3RkY5NDFCNzExRUM5RTIyQTFCQThFQTI1NjlCIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RDVFNDM5NzU0MUI2MTFFQzlFMjJBMUJBOEVBMjU2OUIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RDVFNDM5NzY0MUI2MTFFQzlFMjJBMUJBOEVBMjU2OUIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4N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" style="display: none;">
                <button id = "revealAnswerButton" class = "blue" onclick="revealAnswer(this)">I'm done! Show me how an AI sees this image</button>
            </div>     
         </div>
     
     </div>
  </body>
  <script type="text/javascript" src="/assets/piechartdata.json"></script>
  <script type="text/javascript" src="/js/main.js"></script>
  <script type="text/javascript" src="/js/draw.js"></script>
  
  <script type="text/javascript" src="/js/includeHTML.js"></script>
</html>
