import{o as w,s as L,b as y,a as O,l as P,c as A,d as C}from"./vendor.79436710.js";const D=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&c(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function c(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}};D();var l=[{color:"yellow",pixel_count:1069,percentage:.98,user_percentage:0},{color:"orange",pixel_count:3494,percentage:3.21,user_percentage:0},{color:"red",pixel_count:7892,percentage:7.25,user_percentage:0},{color:"purple",pixel_count:16193,percentage:14.87,user_percentage:0}],b=w().domain(["yellow","orange","red","purple"]).range(["#ffda2e","#f3781e","#bb0f44","#5b0b67"]);const i={top:10,right:30,bottom:20,left:50},m=460-i.left-i.right,u=350-i.top-i.bottom,p=L("#d3-canvas-bar").append("svg").attr("width",m+i.left+i.right).attr("height",u+i.top+i.bottom).append("g").attr("transform",`translate(${i.left},${i.top})`),_=["percentage","user_percentage"],v=l.map(e=>e.color);console.log("groups = "+v);const x=y().domain(v).range([0,m]).padding([.2]);p.append("g").attr("transform",`translate(0, ${u})`).call(O(x).tickSize(0));const d=P().domain([0,15]).range([u,0]);p.append("g").call(A(d));const f=y().domain(_).range([0,x.bandwidth()]).padding([.05]);p.append("g").selectAll("g").data(l).join("g").attr("transform",e=>`translate(${x(e.color)}, 0)`).selectAll("rect").data(function(e){return _.map(function(o){return o=="user_percentage"?{key:o,value:e.user_percentage,color:e.color}:{key:o,value:e.percentage,color:e.color}})}).join("rect").attr("class",e=>e.key).attr("x",e=>f(e.key)).attr("y",e=>d(e.value)).attr("width",f.bandwidth()).attr("height",e=>u-d(e.value)).attr("fill",function(e){return e.key=="percentage"?colorGrey:b(e.color)});p.append("text").attr("class","y label").attr("text-anchor","end").attr("dy","-35px").attr("dx","-"+(m/2-40)+"px").attr("transform","rotate(-90)").text("Percentage");C("#canvas").on("mouseup",F);function F(){j();var e=p.selectAll(".user_percentage").data(l);console.log(e),e.join(".user_percentage").transition().duration(1e3).attr("x",o=>f("user_percentage")).attr("y",o=>d(o.user_percentage)).attr("width",f.bandwidth()).attr("height",o=>u-d(o.user_percentage)).attr("fill",o=>b(o.color))}function j(){const e=context.getImageData(0,0,canvas.width,canvas.height),o=contextCompare.getImageData(0,0,canvasCompare.width,canvasCompare.height),t=e.data,c=o.data;console.log("length of data = "+t.length),console.log("length of heat data = "+c.length);let r=0,a=0,s=0,g=0;for(let n=0;n<t.length;n+=4)r+=h(t,c,n,255,218,46),s+=h(t,c,n,243,120,30),a+=h(t,c,n,187,15,68),g+=h(t,c,n,91,11,103);console.log("countYellow = "+r),console.log("countOrange = "+s),console.log("countRed = "+a),console.log("countPurple = "+g);for(let n=0;n<l.length;n+=1)l[n].color=="yellow"&&(l[n].user_percentage=(r/(t.length/4)*100).toFixed(2)),l[n].color=="orange"&&(l[n].user_percentage=(s/(t.length/4)*100).toFixed(2)),l[n].color=="red"&&(l[n].user_percentage=(a/(t.length/4)*100).toFixed(2)),l[n].color=="purple"&&(l[n].user_percentage=(g/(t.length/4)*100).toFixed(2))}function h(e,o,t,c,r,a){let s=!1,g=!1,n=!1;return e[t]==c&&e[t]==o[t]&&(s=!0),e[t+1]==r&&e[t+1]==o[t+1]&&(g=!0),e[t+2]==a&&e[t+2]==o[t+2]&&(n=!0),s&&g&&n?1:0}
